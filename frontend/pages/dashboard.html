            <div class="main-container">

        <!-- Row 1: AI Market Signals + Agent Consciousness (equal width) -->
        <div class="market-signals-row">
            <!-- AI Signals Panel -->
            <div class="card" style="height: 340px; display: flex; flex-direction: column;">
                <div class="card-header" style="padding: 6px 16px; min-height: auto; flex-shrink: 0;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <h2 class="card-title" style="font-size: 14px; margin: 0;">ü§ñ AI Market Signals</h2>
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="display: flex; align-items: center; gap: 6px;">
                                <span style="color: #9ca3af; font-size: 10px;">Score:</span>
                                <span id="ai-signals-score" style="color: #fff; font-size: 16px; font-weight: 700;">N/A</span>
                            </div>
                            <div style="color: #9ca3af; font-size: 10px;">
                                <span style="margin-right: 4px;">üïê</span><span id="ai-signals-updated">Never</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="padding: 12px 16px; flex: 1; display: flex; flex-direction: column; overflow: hidden;">
                    <div id="ai-signals-summary" style="color: #d1d5db; font-size: 12px; line-height: 1.5; margin-bottom: 10px; flex-shrink: 0;">
                        Loading AI analysis...
                    </div>

                    <!-- Trading Signals Counter -->
                    <div style="display: flex; gap: 8px; margin-bottom: 10px; flex-shrink: 0;">
                        <div style="flex: 1; background: rgba(16,185,129,0.1); border: 1px solid rgba(16,185,129,0.2); padding: 6px; border-radius: 6px; text-align: center;">
                            <div style="color: #9ca3af; font-size: 9px;">Active Signals</div>
                            <div id="active-signals-count" style="color: #10b981; font-weight: 700; font-size: 14px;">0</div>
                        </div>
                        <div style="flex: 1; background: rgba(59,130,246,0.1); border: 1px solid rgba(59,130,246,0.2); padding: 6px; border-radius: 6px; text-align: center;">
                            <div style="color: #9ca3af; font-size: 9px;">Open Trades</div>
                            <div id="open-trades-count" style="color: #3b82f6; font-weight: 700; font-size: 14px;">0</div>
                        </div>
                    </div>

                    <!-- Agent Stats -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 6px; font-size: 10px; flex-shrink: 0;">
                        <div style="background: rgba(59,130,246,0.1); border: 1px solid rgba(59,130,246,0.2); padding: 4px; border-radius: 4px; text-align: center;">
                            <div style="color: #9ca3af; font-size: 9px;">Cycles</div>
                            <div id="consciousness-cycles" style="color: #3b82f6; font-weight: 600; font-size: 12px;">-</div>
                        </div>
                        <div style="background: rgba(16,185,129,0.1); border: 1px solid rgba(16,185,129,0.2); padding: 4px; border-radius: 4px; text-align: center;">
                            <div style="color: #9ca3af; font-size: 9px;">Events</div>
                            <div id="consciousness-events" style="color: #10b981; font-weight: 600; font-size: 12px;">-</div>
                        </div>
                        <div style="background: rgba(239,68,68,0.1); border: 1px solid rgba(239,68,68,0.2); padding: 4px; border-radius: 4px; text-align: center;">
                            <div style="color: #9ca3af; font-size: 9px;">Errors</div>
                            <div id="consciousness-errors" style="color: #ef4444; font-weight: 600; font-size: 12px;">-</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agent Consciousness Panel -->
            <div class="card" style="height: 340px; display: flex; flex-direction: column;">
                <div class="card-header" style="padding: 6px 16px; min-height: auto; flex-shrink: 0;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <h2 class="card-title" style="font-size: 14px; margin: 0;">üß† Agent Consciousness</h2>
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="color: #9ca3af; font-size: 10px;">
                                <span style="margin-right: 4px;">üïê</span><span id="consciousness-updated">Never</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="padding: 12px 16px; flex: 1; display: flex; flex-direction: column; overflow: hidden;">
                    <!-- A. Global Consciousness (stable) -->
                    <div style="margin-bottom: 10px; flex: 1; display: flex; flex-direction: column;">
                        <div style="color: #10b981; font-size: 11px; margin-bottom: 4px; font-weight: 700; flex-shrink: 0;">üåç Global Consciousness</div>
                        <div id="consciousness-global" style="color: #e5e7eb; font-size: 12px; line-height: 1.4; background: rgba(16,185,129,0.1); border: 1px solid rgba(16,185,129,0.2); padding: 8px; border-radius: 6px; flex: 1; overflow-y: auto;">
                            Initializing global state...
                        </div>
                    </div>

                    <!-- B. Working (volatile - last event) -->
                    <div style="flex: 1; display: flex; flex-direction: column;">
                        <div style="color: #f59e0b; font-size: 11px; margin-bottom: 4px; font-weight: 700; flex-shrink: 0;">‚ö° Working</div>
                        <div id="consciousness-last-event" style="color: #d1d5db; font-size: 11px; line-height: 1.4; background: rgba(245,158,11,0.1); border: 1px solid rgba(245,158,11,0.2); padding: 8px; border-radius: 6px; flex: 1; overflow-y: auto; font-style: italic;">
                            Waiting for events...
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Row 2: Market Cap + Financial Market Status (equal width) -->
        <div class="market-signals-row">
            <!-- Market Cap Visualization -->
            <div class="card" style="height: 340px;">
                <div class="card-header">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <h2 class="card-title">üìä Market Cap Visualization</h2>
                        <button id="finance-market-btn" style="
                            background: linear-gradient(135deg, #f59e0b, #d97706);
                            border: none;
                            border-radius: 8px;
                            padding: 6px 10px;
                            color: white;
                            font-size: 14px;
                            cursor: pointer;
                            display: flex;
                            align-items: center;
                            gap: 5px;
                            transition: all 0.2s;
                            font-weight: 600;
                        " onmouseover="this.style.background='linear-gradient(135deg, #d97706, #b45309)'"
                           onmouseout="this.style.background='linear-gradient(135deg, #f59e0b, #d97706)'"
                           title="Display financial market status">
                            üíπ Market
                        </button>
                    </div>
                    <div style="font-size: 12px; color: #9ca3af;">
                        Size proportional to market capitalization
                    </div>
                </div>
                <div id="market-cap-visualization" style="height: 240px; padding: 16px;">
                    <div style="text-align: center; color: #9ca3af; padding: 50px;">
                        Loading market cap visualization...
                    </div>
                </div>
            </div>

            <!-- Financial Market Status -->
            <div class="card" style="height: 340px;">
                <h2 class="card-title">üìà Crypto Financial Market Status</h2>

                <div style="position: relative; height: 100%; display: flex; flex-direction: column; padding: 16px;">
                    <!-- Loading indicator -->
                    <div id="market-status-loading" style="display: none; text-align: center; padding: 20px; color: #9ca3af;">
                        <div style="font-size: 14px; margin-bottom: 8px;">‚è≥ Loading market data...</div>
                    </div>

                    <!-- 2x2 Grid for the 4 corner metrics -->
                    <div id="market-status-content" style="display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: auto auto; gap: 12px; margin-bottom: 12px;">
                        <!-- Market Cap Total - Upper left corner -->
                        <div style="text-align: left;">
                            <div style="font-size: 10px; color: #9ca3af; font-weight: 500; margin-bottom: 2px;">Market Cap Total</div>
                            <div id="total-market-cap" style="font-size: 16px; font-weight: 700; color: #10b981;">--</div>
                        </div>

                        <!-- Volume 24h - Upper right corner -->
                        <div style="text-align: right;">
                            <div style="font-size: 10px; color: #9ca3af; font-weight: 500; margin-bottom: 2px;">Volume 24h</div>
                            <div id="total-volume-24h" style="font-size: 16px; font-weight: 700; color: #3b82f6;">--</div>
                        </div>

                        <!-- Dominance BTC - Lower left corner -->
                        <div style="text-align: left;">
                            <div style="font-size: 10px; color: #9ca3af; font-weight: 500; margin-bottom: 2px;">Dominance BTC</div>
                            <div id="btc-dominance" style="font-size: 16px; font-weight: 700; color: #f59e0b;">--</div>
                        </div>

                        <!-- Market Sentiment - Lower right corner -->
                        <div style="text-align: right;">
                            <div style="font-size: 10px; color: #9ca3af; font-weight: 500; margin-bottom: 2px;">Sentiment</div>
                            <div id="market-sentiment-text" style="font-size: 14px; font-weight: 700; color: #6b7280;">--</div>
                        </div>
                    </div>

                    <!-- Jauge de sentiment au centre -->
                    <div style="flex: 1; display: flex; align-items: center; justify-content: center; margin-top: 5px;">
                        <div style="position: relative; width: 160px; height: 90px;">
                            <!-- SVG Gauge -->
                            <svg width="160" height="90" viewBox="0 0 160 90" style="overflow: visible;">
                                <!-- Arc de fond -->
                                <path d="M 16 80 A 64 64 0 0 1 144 80"
                                    fill="none"
                                    stroke="rgba(255, 255, 255, 0.1)"
                                    stroke-width="10"
                                    stroke-linecap="round"/>

                                <!-- Arc rouge (BEARISH) -->
                                <path d="M 16 80 A 64 64 0 0 1 50 28"
                                    fill="none"
                                    stroke="#ef4444"
                                    stroke-width="10"
                                    stroke-linecap="round"
                                    opacity="0.6"/>

                                <!-- Arc jaune (NEUTRAL) -->
                                <path d="M 50 28 A 64 64 0 0 1 110 28"
                                    fill="none"
                                    stroke="#f59e0b"
                                    stroke-width="10"
                                    stroke-linecap="round"
                                    opacity="0.6"/>

                                <!-- Arc vert (BULLISH) -->
                                <path d="M 110 28 A 64 64 0 0 1 144 80"
                                    fill="none"
                                    stroke="#10b981"
                                    stroke-width="10"
                                    stroke-linecap="round"
                                    opacity="0.6"/>

                                <!-- Aiguille -->
                                <g id="sentiment-gauge-needle" style="transform-origin: 80px 80px; transition: transform 0.5s ease;">
                                    <line x1="80" y1="80" x2="80" y2="25"
                                        stroke="#fff"
                                        stroke-width="2.5"
                                        stroke-linecap="round"/>
                                    <circle cx="80" cy="80" r="5" fill="#fff"/>
                                </g>
                            </svg>

                            <!-- Labels -->
                            <div style="position: absolute; bottom: 3px; left: 0; font-size: 8px; color: #ef4444; font-weight: 600;">BEAR</div>
                            <div style="position: absolute; bottom: 3px; right: 0; font-size: 8px; color: #10b981; font-weight: 600;">BULL</div>
                            <div style="position: absolute; bottom: 3px; left: 50%; transform: translateX(-50%); font-size: 8px; color: #f59e0b; font-weight: 600;">NEUTRAL</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Row 3: Prices + News (equal width) -->
        <div class="prices-news-row">
            <!-- Crypto prices -->
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">üí∞ Real-Time Crypto Prices</h2>
                    <div style="font-size: 12px; color: #9ca3af;">
                        Last update: <span id="prices-last-update">Never</span>
                    </div>
                </div>
                <div id="crypto-prices" style="display: grid; gap: 12px; max-height: 350px; overflow-y: auto;">
                    <div style="text-align: center; color: #9ca3af; padding: 20px;">
                        Loading prices...
                    </div>
                </div>
            </div>
            
            <!-- Crypto news -->
            <div class="card">
                <div class="card-header">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <h2 class="card-title">üì∞ Crypto News</h2>
                        <button id="world-context-btn" style="
                            background: linear-gradient(135deg, #3b82f6, #1e40af);
                            border: none;
                            border-radius: 8px;
                            padding: 6px 10px;
                            color: white;
                            font-size: 14px;
                            cursor: pointer;
                            display: flex;
                            align-items: center;
                            gap: 5px;
                            transition: all 0.2s;
                            font-weight: 600;
                        " onmouseover="this.style.background='linear-gradient(135deg, #2563eb, #1d4ed8)'" 
                           onmouseout="this.style.background='linear-gradient(135deg, #3b82f6, #1e40af)'"
                           title="Display world context">
                            üåç World
                        </button>
                    </div>
                    <div style="font-size: 12px; color: #9ca3af;">
                        Last update: <span id="news-last-update">Never</span>
                    </div>
                </div>
                <div id="crypto-news" style="display: grid; gap: 12px; max-height: 350px; overflow-y: auto;">
                    <div style="text-align: center; color: #9ca3af; padding: 20px;">
                        Loading news...
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal for logs -->
    <div id="logs-modal" style="
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.8);
        display: none;
        z-index: 1001;
        align-items: center;
        justify-content: center;
    ">
        <div style="
            background: rgba(10, 11, 13, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 24px;
            width: 80%;
            max-width: 800px;
            max-height: 80%;
            overflow-y: auto;
            backdrop-filter: blur(20px);
        ">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3 style="color: #fff; font-size: 18px;">üìã System Logs</h3>
                <button id="close-logs-modal" style="
                    background: none;
                    border: none;
                    color: #9ca3af;
                    font-size: 24px;
                    cursor: pointer;
                    padding: 0;
                    width: 30px;
                    height: 30px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    border-radius: 50%;
                    transition: all 0.3s ease;
                " onmouseover="this.style.background='rgba(255,255,255,0.1)'" onmouseout="this.style.background='none'">√ó</button>
            </div>
            <div id="logs-content" style="
                background: rgba(0, 0, 0, 0.3);
                padding: 16px;
                border-radius: 8px;
                font-family: 'Courier New', monospace;
                font-size: 12px;
                color: #e4e4e7;
                white-space: pre-wrap;
                max-height: 500px;
                overflow-y: auto;
            ">
                <div style="color: #10b981;">[2025-07-30 12:34:56] ‚úÖ FedEdge AI Backend started</div>
                <div style="color: #f59e0b;">[2025-07-30 12:34:56] üîÑ Scheduler started with data collection tasks</div>
                <div style="color: #6366f1;">[2025-07-30 12:34:57] üì° WebSocket manager initialized</div>
                <div style="color: #10b981;">[2025-07-30 12:34:58] üí∞ Price collection task started</div>
                <div style="color: #10b981;">[2025-07-30 12:34:59] üì∞ News collection task started</div>
                <div style="color: #9ca3af;">[2025-07-30 12:35:00] üîå Client connected: client_abc123</div>
                <div style="color: #f59e0b;">[2025-07-30 12:35:15] üí∞ Fetched prices: BTC=$115,390 ETH=$3,671</div>
                <div style="color: #f59e0b;">[2025-07-30 12:35:30] üì∞ Fetched 5 new articles from RSS feeds</div>
            </div>
        </div>
    </div>
    
    <!-- Modal for debug console -->
    <div id="debug-console-modal" style="
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.8);
        display: none;
        z-index: 1002;
        align-items: center;
        justify-content: center;
    ">
        <div style="
            background: rgba(10, 11, 13, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 24px;
            width: 90%;
            max-width: 1000px;
            max-height: 85%;
            overflow: hidden;
            backdrop-filter: blur(20px);
            display: flex;
            flex-direction: column;
        ">
            <!-- Header -->
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-shrink: 0;">
                <h3 style="color: #fff; font-size: 18px;">üêõ Debug Console - Real-time Trace</h3>
                <button id="close-debug-console-modal" style="
                    background: none;
                    border: none;
                    color: #9ca3af;
                    font-size: 24px;
                    cursor: pointer;
                    padding: 0;
                    width: 30px;
                    height: 30px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                " onmouseover="this.style.background='rgba(255,255,255,0.1)'" onmouseout="this.style.background='none'">√ó</button>
            </div>
            
            <!-- Controls -->
            <div style="margin-bottom: 15px; display: flex; gap: 10px; align-items: center; flex-shrink: 0;">
                <button id="debug-clear-btn" style="
                    background: #374151;
                    border: 1px solid rgba(255, 255, 255, 0.1);
                    color: #e4e4e7;
                    padding: 6px 12px;
                    border-radius: 6px;
                    cursor: pointer;
                    font-size: 12px;
                ">üóëÔ∏è Clear</button>
                <button id="debug-pause-btn" style="
                    background: #374151;
                    border: 1px solid rgba(255, 255, 255, 0.1);
                    color: #e4e4e7;
                    padding: 6px 12px;
                    border-radius: 6px;
                    cursor: pointer;
                    font-size: 12px;
                ">‚è∏Ô∏è Pause</button>
                <span style="color: #9ca3af; font-size: 12px; margin-left: auto;">
                    <span id="debug-logs-count">0</span> logs
                </span>
            </div>
            
            <!-- Debug Console -->
            <div id="debug-console" style="
                background: rgba(0, 0, 0, 0.4);
                border: 1px solid rgba(255, 255, 255, 0.1);
                border-radius: 8px;
                padding: 12px;
                font-family: 'Courier New', monospace;
                font-size: 11px;
                color: #e4e4e7;
                max-height: 500px;
                overflow-y: auto;
                flex: 1;
                min-height: 0;
            ">
                <div style="color: #6b7280; text-align: center; margin: 20px 0;">
                    üöÄ Debug console initialized<br>
                    Waiting for analysis logs...
                </div>
            </div>
        </div>
    </div>
    
    <!-- Chat Interface -->
    <button class="chat-button" id="chat-button">üí¨</button>
    
    <div class="chat-popup" id="chat-popup">
        <div class="chat-header">
            <h3 class="chat-title">ü§ñ FedEdge AI Assistant</h3>
            <div class="chat-actions">
                <button class="chat-clear" id="chat-clear" title="Clear conversation">üóëÔ∏è</button>
                <button class="chat-close" id="chat-close">√ó</button>
            </div>
        </div>
        <div class="chat-messages" id="chat-messages">
            <div class="message ai">
                Hi! I'm fededge AI assistant. How can I help you?
            </div>
            <div class="typing-indicator" id="typing-indicator">
                Thinking...
            </div>
        </div>
        <div class="chat-input">
            <form class="chat-form" id="chat-form">
                <input type="text" id="chat-input" placeholder="Type your message..." autocomplete="off">
                <button type="submit" class="chat-send" id="chat-send-btn">‚û§</button>
                <button type="button" class="chat-stop" id="chat-stop-btn" style="display: none;">‚¨õ</button>
            </form>
        </div>
    </div>

    <!-- Modal for signal details -->
    <div id="signal-details-modal" style="
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.8);
        display: none;
        z-index: 1002;
        align-items: center;
        justify-content: center;
        padding: 20px;
    ">
        <div style="
            background: rgba(10, 11, 13, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
        ">
            <!-- Modal header -->
            <div style="
                padding: 20px 24px;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                display: flex;
                justify-content: space-between;
                align-items: center;
                position: sticky;
                top: 0;
                background: rgba(10, 11, 13, 0.95);
                backdrop-filter: blur(10px);
            ">
                <div>
                    <h2 style="color: #fff; margin: 0; font-size: 18px; font-weight: 600;">
                        ü§ñ Complete AI Analysis
                    </h2>
                    <p style="color: #9ca3af; margin: 4px 0 0 0; font-size: 14px;" id="signal-modal-subtitle">
                        Analysis details
                    </p>
                </div>
                <button id="close-signal-modal" style="
                    background: rgba(255, 255, 255, 0.1);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    border-radius: 6px;
                    color: #fff;
                    padding: 8px 12px;
                    cursor: pointer;
                    font-size: 14px;
                    transition: all 0.2s ease;
                " onmouseover="this.style.background='rgba(255, 255, 255, 0.15)'" 
                   onmouseout="this.style.background='rgba(255, 255, 255, 0.1)'">
                    ‚úï Close
                </button>
            </div>
            
            <!-- Modal content -->
            <div style="padding: 24px;">
                <!-- Signal summary -->
                <div style="
                    background: rgba(255, 255, 255, 0.05);
                    border: 1px solid rgba(255, 255, 255, 0.1);
                    border-radius: 8px;
                    padding: 16px;
                    margin-bottom: 20px;
                ">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div id="signal-modal-action" style="
                                padding: 6px 12px;
                                border-radius: 6px;
                                font-weight: 600;
                                font-size: 14px;
                                background: #10b981;
                                color: #fff;
                            ">BUY</div>
                            <h3 id="signal-modal-asset" style="color: #fff; margin: 0; font-size: 16px;">ETH</h3>
                        </div>
                        <div id="signal-modal-confidence" style="
                            background: rgba(16, 185, 129, 0.2);
                            border: 1px solid rgba(16, 185, 129, 0.3);
                            padding: 4px 8px;
                            border-radius: 4px;
                            color: #10b981;
                            font-size: 12px;
                            font-weight: 600;
                        ">85%</div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 12px; margin-bottom: 12px;">
                        <div>
                            <div style="color: #9ca3af; font-size: 12px;">Entry Price</div>
                            <div id="signal-modal-entry" style="color: #fff; font-weight: 600;">-</div>
                        </div>
                        <div>
                            <div style="color: #9ca3af; font-size: 12px;">Target</div>
                            <div id="signal-modal-target" style="color: #10b981; font-weight: 600;">-</div>
                        </div>
                        <div>
                            <div style="color: #9ca3af; font-size: 12px;">Stop Loss</div>
                            <div id="signal-modal-stop" style="color: #ef4444; font-weight: 600;">-</div>
                        </div>
                        <div>
                            <div style="color: #9ca3af; font-size: 12px;">Type</div>
                            <div id="signal-modal-type" style="color: #fbbf24; font-weight: 600;">-</div>
                        </div>
                    </div>
                    
                    <div style="color: #9ca3af; font-size: 12px; margin-bottom: 4px;">Timestamp</div>
                    <div id="signal-modal-timestamp" style="color: #d1d5db; font-size: 13px;">-</div>
                </div>
                
                <!-- AI Reasoning -->
                <div style="margin-bottom: 20px;">
                    <h4 style="color: #fff; margin: 0 0 12px 0; font-size: 16px; display: flex; align-items: center; gap: 8px;">
                        üß† AI Reasoning
                    </h4>
                    <div id="signal-modal-reasoning" style="
                        background: rgba(59, 130, 246, 0.1);
                        border: 1px solid rgba(59, 130, 246, 0.2);
                        border-radius: 8px;
                        padding: 16px;
                        color: #d1d5db;
                        line-height: 1.6;
                        font-size: 14px;
                        white-space: pre-wrap;
                    ">
                        Loading reasoning...
                    </div>
                </div>
                
                <!-- Raw LLM Data -->
                <div style="margin-bottom: 20px;">
                    <h4 style="color: #fff; margin: 0 0 12px 0; font-size: 16px; display: flex; align-items: center; gap: 8px;">
                        üîç Complete LLM Response
                    </h4>
                    <div id="signal-modal-llm-response" style="
                        background: rgba(0, 0, 0, 0.3);
                        border: 1px solid rgba(255, 255, 255, 0.1);
                        border-radius: 8px;
                        padding: 16px;
                        color: #9ca3af;
                        font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
                        font-size: 12px;
                        line-height: 1.5;
                        white-space: pre-wrap;
                        max-height: 300px;
                        overflow-y: auto;
                    ">
                        Loading LLM response...
                    </div>
                </div>
                
                <!-- Analysis Context -->
                <div>
                    <h4 style="color: #fff; margin: 0 0 12px 0; font-size: 16px; display: flex; align-items: center; gap: 8px;">
                        üìä Analysis Context
                    </h4>
                    <div style="display: grid; gap: 12px;">
                        <div style="
                            background: rgba(255, 255, 255, 0.05);
                            border: 1px solid rgba(255, 255, 255, 0.1);
                            border-radius: 6px;
                            padding: 12px;
                        ">
                            <div style="color: #fbbf24; font-size: 12px; font-weight: 600; margin-bottom: 6px;">üåç World Context</div>
                            <div id="signal-modal-world-context" style="color: #d1d5db; font-size: 13px; line-height: 1.4;">-</div>
                        </div>
                        <div style="
                            background: rgba(255, 255, 255, 0.05);
                            border: 1px solid rgba(255, 255, 255, 0.1);
                            border-radius: 6px;
                            padding: 12px;
                        ">
                            <div style="color: #10b981; font-size: 12px; font-weight: 600; margin-bottom: 6px;">üí∞ Financial Context</div>
                            <div id="signal-modal-finance-context" style="color: #d1d5db; font-size: 13px; line-height: 1.4;">-</div>
                        </div>
                        <div style="
                            background: rgba(255, 255, 255, 0.05);
                            border: 1px solid rgba(255, 255, 255, 0.1);
                            border-radius: 6px;
                            padding: 12px;
                        ">
                            <div style="color: #8b5cf6; font-size: 12px; font-weight: 600; margin-bottom: 6px;">ü™ô Asset Context</div>
                            <div id="signal-modal-asset-context" style="color: #d1d5db; font-size: 13px; line-height: 1.4;">-</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal for scheduler configuration -->
    <div id="scheduler-config-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">‚öôÔ∏è Scheduler Configuration</h3>
                <button class="close-btn" onclick="document.getElementById('scheduler-config-modal').style.display='none'">&times;</button>
            </div>
            <div class="modal-body" id="scheduler-config-content">
                <div style="text-align: center; color: #9ca3af; padding: 40px;">
                    Loading configuration...
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for user objectives -->
    <div id="user-objectives-modal" class="modal-overlay">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h3 class="modal-title">üéØ Trading Objectives & Strategy</h3>
                <button class="close-btn" onclick="document.getElementById('user-objectives-modal').style.display='none'">&times;</button>
            </div>
            <div class="modal-body" id="user-objectives-content">
                <div style="text-align: center; color: #9ca3af; padding: 40px;">
                    Loading objectives...
                </div>
            </div>
        </div>
    </div>

    

    <!-- Modal to add an LLM -->
    <div id="add-llm-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content" style="max-width: 600px; max-height: 90vh;">
            <div class="modal-header">
                <h3 class="modal-title">ü§ñ Add New LLM</h3>
                <button class="close-btn" id="close-add-llm-modal">&times;</button>
            </div>
            <div class="modal-body" style="padding: 24px; overflow-y: auto;">
                
                <form id="add-llm-form">
                    <!-- Basic Information -->
                    <div style="margin-bottom: 20px;">
                        <h4 style="color: #fff; margin: 0 0 12px 0; font-size: 16px;">üìã Basic Information</h4>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 12px;">
                            <div>
                                <label style="color: #9ca3af; font-size: 12px; margin-bottom: 4px; display: block;">LLM Name</label>
                                <input type="text" id="llm-name" required style="
                                    width: 100%;
                                    padding: 8px 12px;
                                    background: rgba(0, 0, 0, 0.3);
                                    border: 1px solid rgba(255, 255, 255, 0.2);
                                    border-radius: 6px;
                                    color: #fff;
                                    font-size: 14px;
                                " placeholder="Ex: OpenAI GPT-4">
                            </div>
                            <div>
                                <label style="color: #9ca3af; font-size: 12px; margin-bottom: 4px; display: block;">Unique ID</label>
                                <input type="text" id="llm-id" required style="
                                    width: 100%;
                                    padding: 8px 12px;
                                    background: rgba(0, 0, 0, 0.3);
                                    border: 1px solid rgba(255, 255, 255, 0.2);
                                    border-radius: 6px;
                                    color: #fff;
                                    font-size: 14px;
                                " placeholder="Ex: openai-gpt4">
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 12px;">
                            <label style="color: #9ca3af; font-size: 12px; margin-bottom: 4px; display: block;">LLM Type</label>
                            <select id="llm-type" required style="
                                width: 100%;
                                padding: 8px 12px;
                                background: rgba(0, 0, 0, 0.3);
                                border: 1px solid rgba(255, 255, 255, 0.2);
                                border-radius: 6px;
                                color: #fff;
                                font-size: 14px;
                            ">
                                <option value="">-- Select a type --</option>
                                <option value="ollama">Ollama (Local)</option>
                                <option value="openai">OpenAI</option>
                                <option value="claude">Claude (Anthropic)</option>
                                <option value="gemini">Gemini (Google)</option>
                                <option value="grok">Grok (xAI)</option>
                                <option value="deepseek">DeepSeek</option>
                                <option value="kimi">Kimi</option>
                                <option value="qwen">Qwen</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Configuration -->
                    <div style="margin-bottom: 20px;">
                        <h4 style="color: #fff; margin: 0 0 12px 0; font-size: 16px;">üîß Configuration</h4>
                        
                        <div style="margin-bottom: 12px;">
                            <label style="color: #9ca3af; font-size: 12px; margin-bottom: 4px; display: block;">API URL</label>
                            <input type="url" id="llm-url" required style="
                                width: 100%;
                                padding: 8px 12px;
                                background: rgba(0, 0, 0, 0.3);
                                border: 1px solid rgba(255, 255, 255, 0.2);
                                border-radius: 6px;
                                color: #fff;
                                font-size: 14px;
                            " placeholder="Ex: https://api.openai.com/v1">
                        </div>
                        
                        <div style="margin-bottom: 12px;">
                            <label style="color: #9ca3af; font-size: 12px; margin-bottom: 4px; display: block;">
                                Model Name
                                <span style="color: #6366f1; font-size: 11px;">(used by DSPy for agents)</span>
                            </label>
                            <input type="text" id="llm-model" required style="
                                width: 100%;
                                padding: 8px 12px;
                                background: rgba(0, 0, 0, 0.3);
                                border: 1px solid rgba(255, 255, 255, 0.2);
                                border-radius: 6px;
                                color: #fff;
                                font-size: 14px;
                            " placeholder="Ex: gpt-4, claude-3-sonnet, gemma3:7b">
                            <div style="color: #6b7280; font-size: 11px; margin-top: 4px; line-height: 1.3;">
                                üí° This model will be used by DSPy agents for trading analysis and chat
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 12px;">
                            <label style="color: #9ca3af; font-size: 12px; margin-bottom: 4px; display: block;">API Key (optional for Ollama)</label>
                            <input type="password" id="llm-api-key" style="
                                width: 100%;
                                padding: 8px 12px;
                                background: rgba(0, 0, 0, 0.3);
                                border: 1px solid rgba(255, 255, 255, 0.2);
                                border-radius: 6px;
                                color: #fff;
                                font-size: 14px;
                            " placeholder="Your API key">
                        </div>
                    </div>
                    
                    <!-- Advanced Parameters -->
                    <div style="margin-bottom: 20px;">
                        <h4 style="color: #fff; margin: 0 0 12px 0; font-size: 16px;">‚ö° Advanced Parameters</h4>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px;">
                            <div>
                                <label style="color: #9ca3af; font-size: 12px; margin-bottom: 4px; display: block;">Max Tokens</label>
                                <input type="number" id="llm-max-tokens" value="4096" min="1" max="100000" style="
                                    width: 100%;
                                    padding: 8px 12px;
                                    background: rgba(0, 0, 0, 0.3);
                                    border: 1px solid rgba(255, 255, 255, 0.2);
                                    border-radius: 6px;
                                    color: #fff;
                                    font-size: 14px;
                                ">
                            </div>
                            <div>
                                <label style="color: #9ca3af; font-size: 12px; margin-bottom: 4px; display: block;">Temperature</label>
                                <input type="number" id="llm-temperature" value="0.7" min="0" max="2" step="0.1" style="
                                    width: 100%;
                                    padding: 8px 12px;
                                    background: rgba(0, 0, 0, 0.3);
                                    border: 1px solid rgba(255, 255, 255, 0.2);
                                    border-radius: 6px;
                                    color: #fff;
                                    font-size: 14px;
                                ">
                            </div>
                            <div>
                                <label style="color: #9ca3af; font-size: 12px; margin-bottom: 4px; display: block;">Timeout (s)</label>
                                <input type="number" id="llm-timeout" value="30" min="5" max="300" style="
                                    width: 100%;
                                    padding: 8px 12px;
                                    background: rgba(0, 0, 0, 0.3);
                                    border: 1px solid rgba(255, 255, 255, 0.2);
                                    border-radius: 6px;
                                    color: #fff;
                                    font-size: 14px;
                                ">
                            </div>
                        </div>
                        
                        <div style="margin-top: 12px; display: flex; gap: 16px;">
                            <label style="display: flex; align-items: center; color: #fff; font-size: 14px; cursor: pointer;">
                                <input type="checkbox" id="llm-is-default" style="margin-right: 8px;">
                                Set as default LLM
                            </label>
                            <label style="display: flex; align-items: center; color: #fff; font-size: 14px; cursor: pointer;">
                                <input type="checkbox" id="llm-is-active" checked style="margin-right: 8px;">
                                Activate immediately
                            </label>
                        </div>
                    </div>
                    
                    <!-- Action Buttons -->
                    <div style="
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        padding-top: 16px;
                        border-top: 1px solid rgba(255, 255, 255, 0.1);
                    ">
                        <button type="button" id="test-llm-config-btn" style="
                            background: rgba(59, 130, 246, 0.2);
                            border: 1px solid rgba(59, 130, 246, 0.3);
                            color: #3b82f6;
                            padding: 8px 16px;
                            border-radius: 6px;
                            cursor: pointer;
                            font-size: 14px;
                        ">üîç Test Configuration</button>
                        
                        <div style="display: flex; gap: 12px;">
                            <button type="button" id="cancel-add-llm-btn" style="
                                background: rgba(156, 163, 175, 0.2);
                                border: 1px solid rgba(156, 163, 175, 0.3);
                                color: #9ca3af;
                                padding: 8px 16px;
                                border-radius: 6px;
                                cursor: pointer;
                                font-size: 14px;
                            ">Cancel</button>
                            <button type="submit" style="
                                background: linear-gradient(135deg, #10b981, #059669);
                                border: none;
                                color: #fff;
                                padding: 8px 16px;
                                border-radius: 6px;
                                cursor: pointer;
                                font-size: 14px;
                                font-weight: 600;
                            ">üíæ Add LLM</button>
                        </div>
                    </div>
                </form>
                
            </div>
        </div>
    </div>

    <!-- Modal for financial market status -->
    <div id="finance-market-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content" style="max-width: 1100px; max-height: 90vh;">
            <div class="modal-header">
                <h3 class="modal-title">üíπ Crypto Financial Market Status</h3>
                <button class="close-btn" id="close-finance-market-modal">&times;</button>
            </div>
            <div class="modal-body" style="padding: 24px; overflow-y: auto;">
                
                <!-- Global market statistics -->
                <div style="
                    background: rgba(245, 158, 11, 0.1);
                    border: 1px solid rgba(245, 158, 11, 0.3);
                    border-radius: 8px;
                    padding: 20px;
                    margin-bottom: 20px;
                ">
                    <h4 style="color: #fff; margin: 0 0 15px 0; font-size: 18px; display: flex; align-items: center; gap: 8px;">
                        üìà Global Market Statistics
                    </h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div style="text-align: center;">
                            <div style="color: #9ca3af; font-size: 12px; margin-bottom: 4px;">Market Cap Total</div>
                            <div id="total-market-cap" style="color: #f59e0b; font-weight: 600; font-size: 16px;">-</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="color: #9ca3af; font-size: 12px; margin-bottom: 4px;">Volume 24h</div>
                            <div id="total-volume-24h" style="color: #10b981; font-weight: 600; font-size: 16px;">-</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="color: #9ca3af; font-size: 12px; margin-bottom: 4px;">Market Sentiment</div>
                            <div id="market-sentiment" style="color: #fff; font-weight: 600; font-size: 16px;">-</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="color: #9ca3af; font-size: 12px; margin-bottom: 4px;">Dominance BTC</div>
                            <div id="btc-dominance" style="color: #f7931a; font-weight: 600; font-size: 16px;">-</div>
                        </div>
                    </div>
                </div>
                
                <!-- Top gainers and losers -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <!-- Top Gainers -->
                    <div style="
                        background: rgba(16, 185, 129, 0.1);
                        border: 1px solid rgba(16, 185, 129, 0.3);
                        border-radius: 8px;
                        padding: 16px;
                    ">
                        <h4 style="color: #fff; margin: 0 0 12px 0; font-size: 16px;">
                            üìà Top 10 Gainers (24h)
                        </h4>
                        <div id="top-gainers-list" style="
                            max-height: 300px;
                            overflow-y: auto;
                            display: grid;
                            gap: 8px;
                        ">
                            <div style="text-align: center; color: #9ca3af; padding: 20px;">
                                Loading gainers...
                            </div>
                        </div>
                    </div>
                    
                    <!-- Top Losers -->
                    <div style="
                        background: rgba(239, 68, 68, 0.1);
                        border: 1px solid rgba(239, 68, 68, 0.3);
                        border-radius: 8px;
                        padding: 16px;
                    ">
                        <h4 style="color: #fff; margin: 0 0 12px 0; font-size: 16px;">
                            üìâ Top 10 Losers (24h)
                        </h4>
                        <div id="top-losers-list" style="
                            max-height: 300px;
                            overflow-y: auto;
                            display: grid;
                            gap: 8px;
                        ">
                            <div style="text-align: center; color: #9ca3af; padding: 20px;">
                                Loading losers...
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Analysis by sectors -->
                <div style="
                    background: rgba(139, 92, 246, 0.1);
                    border: 1px solid rgba(139, 92, 246, 0.3);
                    border-radius: 8px;
                    padding: 16px;
                    margin-bottom: 20px;
                ">
                    <h4 style="color: #fff; margin: 0 0 12px 0; font-size: 16px;">
                        üè¢ Performance by Sector (24h)
                    </h4>
                    <div id="sectors-performance" style="
                        display: grid;
                        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                        gap: 12px;
                    ">
                        <div style="text-align: center; color: #9ca3af; padding: 20px;">
                            Loading sectors...
                        </div>
                    </div>
                </div>
                
                <!-- Performance Distribution -->
                <div style="
                    background: rgba(255, 255, 255, 0.05);
                    border: 1px solid rgba(255, 255, 255, 0.1);
                    border-radius: 8px;
                    padding: 16px;
                ">
                    <h4 style="color: #fff; margin: 0 0 12px 0; font-size: 16px;">
                        üìä Performance Distribution
                    </h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px;">
                        <div style="text-align: center;">
                            <div style="color: #9ca3af; font-size: 12px; margin-bottom: 4px;">Gainers</div>
                            <div id="gains-count" style="color: #10b981; font-weight: 600; font-size: 16px;">-</div>
                            <div id="gains-percentage" style="color: #10b981; font-size: 12px;">-</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="color: #9ca3af; font-size: 12px; margin-bottom: 4px;">Losers</div>
                            <div id="losses-count" style="color: #ef4444; font-weight: 600; font-size: 16px;">-</div>
                            <div id="losses-percentage" style="color: #ef4444; font-size: 12px;">-</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="color: #9ca3af; font-size: 12px; margin-bottom: 4px;">Neutral</div>
                            <div id="neutral-count" style="color: #9ca3af; font-weight: 600; font-size: 16px;">-</div>
                            <div id="neutral-percentage" style="color: #9ca3af; font-size: 12px;">-</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="color: #9ca3af; font-size: 12px; margin-bottom: 4px;">Total Analys√©s</div>
                            <div id="total-analyzed" style="color: #fff; font-weight: 600; font-size: 16px;">-</div>
                        </div>
                    </div>
                </div>
                
                <!-- Last update timestamp -->
                <div style="
                    text-align: center;
                    margin-top: 20px;
                    padding: 12px;
                    background: rgba(0, 0, 0, 0.2);
                    border-radius: 8px;
                ">
                    <div style="color: #9ca3af; font-size: 12px; margin-bottom: 4px;">
                        Last update
                    </div>
                    <div id="finance-last-updated" style="color: #fff; font-weight: 600;">
                        -
                    </div>
                </div>
                
            </div>
        </div>
    </div>

    <!-- Modal pour l'historique des trades -->
    
    <!-- Modal pour les statistiques de trading -->
    <!-- Modal pour la configuration du bot -->
    <div id="bot-config-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h2 style="color: #fff; margin: 0; display: flex; align-items: center; gap: 10px;">
                    ‚öôÔ∏è Configuration du Bot de Trading
                </h2>
                <span class="close-btn" id="close-bot-config-modal">&times;</span>
            </div>
            <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
                
                <!-- Presets rapides -->
                <div style="margin-bottom: 24px;">
                    <h3 style="color: #fff; margin: 0 0 12px 0; font-size: 14px;">üéõÔ∏è Presets Rapides</h3>
                    <div style="display: flex; gap: 8px;">
                        <button id="preset-scalp-btn" style="
                            flex: 1;
                            background: linear-gradient(135deg, #10b981, #059669);
                            border: none;
                            border-radius: 6px;
                            color: #fff;
                            padding: 8px 12px;
                            cursor: pointer;
                            font-size: 11px;
                            font-weight: 600;
                        ">Scalp (180s)</button>
                        <button id="preset-day-btn" style="
                            flex: 1;
                            background: linear-gradient(135deg, #3b82f6, #1e40af);
                            border: none;
                            border-radius: 6px;
                            color: #fff;
                            padding: 8px 12px;
                            cursor: pointer;
                            font-size: 11px;
                            font-weight: 600;
                        ">Day (300s)</button>
                        <button id="preset-swing-btn" style="
                            flex: 1;
                            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
                            border: none;
                            border-radius: 6px;
                            color: #fff;
                            padding: 8px 12px;
                            cursor: pointer;
                            font-size: 11px;
                            font-weight: 600;
                        ">Swing (600s)</button>
                        <button id="preset-reset-btn" style="
                            flex: 1;
                            background: linear-gradient(135deg, #ef4444, #dc2626);
                            border: none;
                            border-radius: 6px;
                            color: #fff;
                            padding: 8px 12px;
                            cursor: pointer;
                            font-size: 11px;
                            font-weight: 600;
                        ">Reset</button>
                    </div>
                </div>
                
                <!-- Configuration actuelle (lecture seule) -->
                <div style="margin-bottom: 24px;">
                    <h3 style="color: #fff; margin: 0 0 12px 0; font-size: 14px;">üìã Configuration Actuelle</h3>
                    <div id="current-bot-config" style="
                        background: rgba(0, 0, 0, 0.4);
                        border-radius: 6px;
                        border: 1px solid rgba(255, 255, 255, 0.1);
                        padding: 12px;
                        font-family: 'Courier New', monospace;
                        font-size: 11px;
                        color: #9ca3af;
                        max-height: 300px;
                        overflow-y: auto;
                        white-space: pre-wrap;
                    ">
                        Loading configuration...
                    </div>
                </div>
                
                <!-- Informations d'√©dition -->
                <div style="background: rgba(59, 130, 246, 0.1); border-radius: 6px; padding: 12px; border-left: 3px solid #3b82f6;">
                    <div style="color: #60a5fa; font-size: 12px; font-weight: 600; margin-bottom: 4px;">
                        üí° √âdition de la Configuration
                    </div>
                    <div style="color: #9ca3af; font-size: 11px;">
                        Pour modifier la configuration, √©ditez le fichier <code style="background: rgba(0,0,0,0.3); padding: 2px 4px; border-radius: 3px;">backend/bot/bot_config.json</code> directement sur le serveur, puis utilisez les presets ou red√©marrez le bot pour appliquer les changements.
                    </div>
                </div>
                
            </div>
            <div class="modal-footer">
                <button id="refresh-bot-config-btn" style="
                    background: linear-gradient(135deg, #10b981, #059669);
                    border: none;
                    border-radius: 8px;
                    color: #fff;
                    padding: 10px 20px;
                    cursor: pointer;
                    font-weight: 600;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                ">
                    üîÑ Recharger Config
                </button>
                <button id="close-bot-config-footer-btn" style="
                    background: rgba(255, 255, 255, 0.1);
                    border: 1px solid rgba(255, 255, 255, 0.2);
                    border-radius: 8px;
                    color: #fff;
                    padding: 10px 20px;
                    cursor: pointer;
                    font-weight: 600;
                ">
                    Close
                </button>
            </div>
        </div>
    </div>
